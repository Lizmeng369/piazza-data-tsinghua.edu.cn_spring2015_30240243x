{"error": null, "result": {"nr": 382, "upvote_ids": [], "change_log": [{"type": "create", "when": "2015-05-03T12:38:35Z", "uid": "i6z6k9yt7b77nz", "data": "i98g2igdq0x7pc", "anon": "no"}, {"uid": "i6ucxgbeel362h", "to": "i98g2igbotf7pb", "when": "2015-05-03T18:47:16Z", "anon": "no", "data": "i98t8n7ra4o41d", "type": "i_answer"}], "q_edits": [], "i_edits": [], "unique_views": 38, "bookmarked": 3, "config": {}, "history": [{"subject": "lab3中的swap_in函数&#xff0c;返回值恒为0&#xff1f;", "content": "<p>阅读了swap.c中的代码&#xff1a;swap_in</p>\n<p>int<br />swap_in(struct mm_struct *mm, uintptr_t addr, struct Page **ptr_result)<br />{<br /> struct Page *result = alloc_page();<br /> assert(result!=NULL);</p>\n<p>pte_t *ptep = get_pte(mm-&gt;pgdir, addr, 0);<br /> // cprintf(&#34;SWAP: load ptep %x swap entry %d to vaddr 0x%08x, page %x, No %d\\n&#34;, ptep, (*ptep)&gt;&gt;8, addr, result, (result-pages));<br /> <br /> int r;<br /> if ((r = swapfs_read((*ptep), result)) != 0)<br /> {<br /> assert(r!=0);<br /> }<br /> cprintf(&#34;swap_in: load disk swap entry %d with swap_page in vadr 0x%x\\n&#34;, (*ptep)&gt;&gt;8, addr);<br /> *ptr_result=result;<br /> return 0;<br />}</p>\n<p>从代码来看&#xff0c;除非出错直接退出&#xff0c;否则返回值恒为0&#xff1f;</p>\n<p>那么在vmm的do_pgfault中&#xff0c;是不是就不需要检测ret = swap_in(mm,addr,&amp;page)是否为0了&#xff1f;</p>", "created": "2015-05-03T12:38:35Z", "uid": "i6z6k9yt7b77nz", "anon": "no"}], "data": {"embed_links": []}, "request_instructor_me": false, "folders": ["lab3"], "type": "question", "tag_good": [], "no_answer": 0, "created": "2015-05-03T12:38:35Z", "t": 1433500458781, "id": "i98g2igbotf7pb", "status": "active", "tag_good_arr": [], "default_anonymity": "no", "my_favorite": false, "bucket_order": 2, "is_bookmarked": false, "is_tag_good": false, "bucket_name": "Today", "no_answer_followup": 0, "children": [{"folders": [], "bucket_order": 2, "config": {}, "history": [{"subject": "", "content": "<p>是&#xff0c;不过为了谨慎起见也可以检查</p>", "created": "2015-05-03T18:47:16Z", "uid": "i6ucxgbeel362h", "anon": "no"}], "data": {"embed_links": []}, "bucket_name": "Today", "is_tag_endorse": false, "children": [], "tag_endorse": [], "tag_endorse_arr": [], "created": "2015-05-03T18:47:16Z", "id": "i98t8n7nx4x41c", "type": "i_answer"}], "request_instructor": 0, "tags": ["lab3", "student"], "s_edits": [], "num_favorites": 0}, "aid": "iajh5t0dwcey5"}