{"aid": "jg3a8inwacxq", "result": {"status": "active", "unique_views": 61, "request_instructor_me": false, "change_log": [{"type": "create", "anon": "no", "when": "2017-04-10T08:14:08Z", "data": "j1budjgy5ys4eq", "uid": "hdjonbiyfs62ie"}, {"to": "j1budjgx9ab4ep", "anon": "no", "when": "2017-04-16T08:44:01Z", "type": "followup", "uid": "ie7xy8gtpwk1t5"}, {"to": "j1budjgx9ab4ep", "anon": "no", "when": "2017-04-17T01:08:42Z", "type": "feedback", "uid": "hdjonbiyfs62ie"}, {"to": "j1budjgx9ab4ep", "anon": "no", "when": "2017-04-17T04:01:48Z", "type": "feedback", "uid": "ie7xy8gtpwk1t5"}, {"to": "j1budjgx9ab4ep", "anon": "no", "when": "2017-04-17T04:16:13Z", "type": "feedback", "uid": "hdjonbiyfs62ie"}, {"to": "j1budjgx9ab4ep", "anon": "no", "when": "2018-04-17T01:07:35Z", "type": "followup", "uid": "isvxeq6bspf1vn"}, {"to": "j1budjgx9ab4ep", "anon": "no", "when": "2018-04-17T01:08:19Z", "type": "followup", "uid": "je2ib42p5md6au"}, {"to": "j1budjgx9ab4ep", "anon": "no", "when": "2018-04-17T01:57:49Z", "type": "feedback", "uid": "je2ib42p5md6au"}], "upvote_ids": [], "id": "j1budjgx9ab4ep", "bookmarked": 4, "tags": ["2017", "instructor-note", "lab4", "lecture13", "课堂问答"], "i_edits": [], "is_bookmarked": false, "children": [{"folders": [], "updated": "2017-04-16T08:44:01Z", "no_upvotes": 0, "uid": "ie7xy8gtpwk1t5", "created": "2017-04-16T08:44:01Z", "type": "followup", "no_answer": 0, "id": "j1kg33ghbf547m", "anon": "no", "bucket_name": "Week 4/16 - 4/22", "config": {}, "bucket_order": 57, "data": null, "children": [{"folders": [], "updated": "2017-04-17T01:08:42Z", "uid": "hdjonbiyfs62ie", "created": "2017-04-17T01:08:42Z", "type": "feedback", "id": "j1lf9eihdkd17h", "anon": "no", "bucket_name": "Week 4/16 - 4/22", "config": {}, "bucket_order": 57, "data": null, "children": [], "subject": "<p>你这里的load_esp0()是只是设置了ts数据结构中的一个字段&#xff0c;并不是真正的堆栈切换。</p>\n<p></p>"}, {"folders": [], "updated": "2017-04-17T04:01:48Z", "uid": "ie7xy8gtpwk1t5", "created": "2017-04-17T04:01:48Z", "type": "feedback", "id": "j1llg0aet5vun", "anon": "no", "bucket_name": "Week 4/16 - 4/22", "config": {}, "bucket_order": 57, "data": null, "children": [], "subject": "<p>之前理解错了&#xff0c;现在我觉得堆栈切换就在switch_to.S中context.esp的切换&#xff0c;不知道是这样吗&#xff1f;</p>"}, {"folders": [], "updated": "2017-04-17T04:16:13Z", "uid": "hdjonbiyfs62ie", "created": "2017-04-17T04:16:13Z", "type": "feedback", "id": "j1llyjdfbah27", "anon": "no", "bucket_name": "Week 4/16 - 4/22", "config": {}, "bucket_order": 57, "data": null, "children": [], "subject": "<p>尝试实际跟踪一下运行情况&#xff0c;然后把结果描述一下。如何&#xff1f;</p>"}], "subject": "<p></p><pre>void\nproc_run(struct proc_struct *proc) {\n    if (proc != current) {\n        bool intr_flag;\n        struct proc_struct *prev = current, *next = proc;\n        local_intr_save(intr_flag);\n        {\n            current = proc;\n            <strong>load_esp0(next-&gt;kstack &#43; KSTACKSIZE);</strong>\n            <strong>lcr3(next-&gt;cr3);</strong>\n            <strong>switch_to(&amp;(prev-&gt;context), &amp;(next-&gt;context));</strong>\n        }\n        local_intr_restore(intr_flag);\n    }\n}</pre>\n<p></p>"}, {"folders": [], "updated": "2018-04-17T01:07:35Z", "no_upvotes": 0, "uid": "isvxeq6bspf1vn", "created": "2018-04-17T01:07:35Z", "type": "followup", "no_answer": 1, "id": "jg2yxw1n2o75xm", "anon": "no", "bucket_name": "Today", "config": {}, "bucket_order": 2, "data": null, "children": [], "subject": "<p>魏钧宇 2015011263</p>"}, {"folders": [], "updated": "2018-04-17T01:08:19Z", "no_upvotes": 0, "uid": "je2ib42p5md6au", "created": "2018-04-17T01:08:19Z", "type": "followup", "no_answer": 1, "id": "jg2yytwqikg4iy", "anon": "no", "bucket_name": "Today", "config": {}, "bucket_order": 2, "data": null, "children": [{"folders": [], "updated": "2018-04-17T01:57:49Z", "uid": "je2ib42p5md6au", "created": "2018-04-17T01:57:49Z", "type": "feedback", "id": "jg30qhlkgnm4hi", "anon": "no", "bucket_name": "Today", "config": {}, "bucket_order": 2, "data": null, "children": [], "subject": "<p></p>\n<p><img src=\"https://d1b10bmlvqabco.cloudfront.net/attach/i5j09fnsl7k5x0/je2ib42p5md6au/jg2zrctzppto/0417.jpeg\" alt=\"\" />方便起见直接截取kernel.asm的代码片段</p>\n<p>可以见到</p>\n<p>分别执行load_esp0和lcr3之后&#xff0c;switch_to实现了堆栈切换</p>"}], "subject": "<p>沈俊贤 2015011258</p>"}], "nr": 1038, "bucket_order": 2, "type": "note", "folders": ["2017", "课堂问答", "lab4", "lecture13"], "no_answer_followup": 2, "num_favorites": 0, "bucket_name": "Today", "q_edits": [], "data": {"embed_links": []}, "request_instructor": 0, "created": "2017-04-10T08:14:08Z", "is_tag_good": false, "config": {}, "s_edits": [], "my_favorite": false, "default_anonymity": "no", "t": 1523946227324, "tag_good": [], "tag_good_arr": [], "history": [{"content": "<p>请两人一组完成“第十三讲 实验四 内核线程管理”中指定小题的回答在此贴中回复&#xff0c;每组同学选做一个数据结构分析和一个流程分析。</p>\n<p></p>\n<p>题目&#xff1a;<br /><a href=\"https://chyyuu.gitbooks.io/os_course_exercises/content/all/05-3-lab4-spoc-discussion.html\">https://chyyuu.gitbooks.io/os_course_exercises/content/all/05-3-lab4-spoc-discussion.html</a></p>\n<p></p>\n<p>视频相关思考题 -&gt; 13.3 执行流程 -&gt; 第5小题</p>\n<p></p>\n<p>分析线程切换流程&#xff0c;找到内核堆栈、页表、寄存器切换的代码位置。</p>", "anon": "no", "created": "2017-04-10T08:14:08Z", "uid": "hdjonbiyfs62ie", "subject": "2017春季-第十三讲课堂实践练习(3)"}]}, "error": null}