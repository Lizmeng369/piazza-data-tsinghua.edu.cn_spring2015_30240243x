{"aid": "izfoumkiyyquz", "result": {"status": "active", "unique_views": 8, "request_instructor_me": false, "change_log": [{"type": "create", "anon": "no", "when": "2017-02-21T14:13:45Z", "data": "izfm34bcpjz5i8", "uid": "ie7xy4dynst1pm"}], "upvote_ids": [], "id": "izfm34b9jkr5i7", "bookmarked": 4, "tags": ["lecture1", "student"], "i_edits": [], "is_bookmarked": false, "children": [], "nr": 974, "bucket_order": 2, "type": "note", "folders": ["lecture1"], "no_answer_followup": 0, "num_favorites": 0, "bucket_name": "Today", "q_edits": [], "data": {"embed_links": []}, "request_instructor": 0, "created": "2017-02-21T14:13:45Z", "is_tag_good": false, "config": {}, "s_edits": [], "my_favorite": false, "default_anonymity": "no", "t": 1487691067842, "tag_good": [], "tag_good_arr": [], "history": [{"content": "<p>因为虚拟机跑起来有点慢&#xff0c;所以在Mac OS Sierra中配了实验环境&#xff0c;踩了一些坑。</p>\n<p></p>\n<p><a href=\"https://github.com/chyyuu/ucore_os_lab\">https://github.com/chyyuu/ucore_os_lab</a>的Readme.md是一份很好的资料&#xff0c;但是在安装gcc, gdb的时候&#xff0c;guide给的是</p>\n<ul><li><code>brew tap altkatz/homebrew-gcc_cross_compilers</code></li><li><code>brew install i386-elf-gcc</code> # may take an hour</li><li><code>brew install i386-elf-gdb</code></li></ul>\n<p>用的时候不知道为什么brew安装gcc的时候总提示SHA256不匹配&#xff0c;改用macports才安好gcc&#xff1a;</p>\n<ul><li><code>sudo port install i386-elf-gcc i386-elf-binutils</code></li></ul>\n<p>由于gdb依赖gcc&#xff0c;gcc不是brew装的&#xff0c;gdb就只好源码编译安装了&#xff0c;用最新版直接安装即可。./configure要把前缀--target设成i386-elf。</p>\n<p></p>\n<p>qemu可以直接brew install qemu装。</p>\n<p></p>\n<p>集成开发环境我装的是Eclipse CDT&#xff0c;是按照MOOC视频装的&#xff0c;其中有一个步骤是要装Zylin Embedded插件。这个插件已经很久没更新了&#xff0c;因此在mac上貌似不能兼容Eclipse最新版&#xff0c;所以要记得安装4.4(Eclipse LUNA)及以下版本的Eclipse CDT。</p>\n<p></p>\n<p>IDE中将工程导入后要在properties的C/C&#43;&#43; Build中把Build Directory改成项目根目录&#xff0c;再把Generate Makefiles automatically去掉&#xff0c;就可以直接使用源码中的Makefile了。</p>\n<p></p>\n<p>配置与QEMU的gdbserver连接时&#xff0c;要创建一个External Tools Configuration用于在IDE里启动模拟器&#xff0c;配置时&#xff0c;Location输入make的路径&#xff08;我这里是/usr/bin/make&#xff09;&#xff0c;Argument输qemu&#xff0c;就相当于替代了make qemu的执行。还要创建一个Debug Configuration&#xff0c;建一个Zylin Embedded debug&#xff0c;在里面GDB debugger填安装的gdb&#xff0c;Command填加载符号与连接gdbserver的命令即可。</p>\n<p></p>\n<p>Makefile需要稍微改一下&#xff1a;把qemu那一项的调用要加上-S和-s&#xff0c;才能载入符号链接并在启动后停在第一条语句。</p>", "anon": "no", "created": "2017-02-21T14:13:45Z", "uid": "ie7xy4dynst1pm", "subject": "分享一点Mac上配置实验环境时踩的坑"}]}, "error": null}